(this.webpackJsonpcanvas=this.webpackJsonpcanvas||[]).push([[0],{197:function(e,n){},198:function(e,n){},199:function(e,n){},201:function(e,n,t){"use strict";t.r(n);var a=t(0),c=t.n(a),i=t(73),l=t.n(i),o=(t(83),t(84),t(78)),r=t(4),s=t(47),d=t(13),u=[{id:0,url:"https://cdn.pixabay.com/photo/2015/04/23/22/00/tree-736885__480.jpg"},{id:1,url:"https://cdn.pixabay.com/photo/2021/11/01/08/39/petit-minou-lighthouse-6759731_960_720.jpg"},{id:2,url:"https://cdn.pixabay.com/photo/2021/02/13/13/20/soap-bubble-6011516_960_720.jpg"},{id:3,url:"https://cdn.pixabay.com/photo/2020/07/18/11/10/clouds-5416914_960_720.jpg"}],j=t(3),b=function(){var e=function(){var e=Object(a.useState)({canvas:null,backgroundColor:"#ffffff",fontSize:"24",href:"",color:"#000000",canvasScale:1,backgroundImage:"",linkImage:""}),n=Object(s.a)(e,2),t=n[0],c=n[1],i=Object(a.useState)(!1),l=Object(s.a)(i,2),o=l[0],u=l[1],j=Object(a.useRef)(null),b=Object(a.useCallback)((function(){var e=t.canvas;e&&(e.getActiveObjects().forEach((function(n){e.remove(n)})),c((function(n){return Object(r.a)(Object(r.a)({},n),{},{canvas:e})})))}),[t]),h=function(e){"Delete"===e.code&&b()},g=function(){var e=t.canvas;e&&e.backgroundImage&&(e.setBackgroundImage(null),e.renderAll(),c((function(n){return Object(r.a)(Object(r.a)({},n),{},{backgroundImage:"",canvas:e})})))};return Object(a.useLayoutEffect)((function(){var e,n,t,a,i=new d.fabric.Canvas("canvas",{backgroundColor:"#FDEFEF",height:null!==(e=null===(n=j.current)||void 0===n?void 0:n.clientHeight)&&void 0!==e?e:500,width:null!==(t=null===(a=j.current)||void 0===a?void 0:a.clientWidth)&&void 0!==t?t:500,preserveObjectStacking:!0});return c((function(e){return Object(r.a)(Object(r.a)({},e),{},{canvas:i})})),function(){document.removeEventListener("keydown",h)}}),[]),Object(a.useEffect)((function(){t.canvas&&document.addEventListener("keydown",h)}),[t.canvas]),{state:t,container:j,handleAddText:function(e){var n=t.canvas,a=t.color;n&&n.add(new d.fabric.IText("".concat(e||"\u0422\u0435\u043a\u0441\u0442"),{fontFamily:"arial",fill:a,fontSize:29,padding:5,left:0})),c((function(e){return Object(r.a)(Object(r.a)({},e),{},{canvas:n})}))},handleDownload:function(){if(t.canvas){var e=t.canvas.toDataURL({format:"png",quality:1});c((function(n){return Object(r.a)(Object(r.a)({},n),{},{href:e})}))}},handleRemoveBackground:g,handleAddBackground:function(e){var n=t.canvas;n&&(g(),d.fabric.Image.fromURL(e,(function(e){n.setBackgroundImage(e,(function(){n.renderAll()}),{scaleX:Number(null===n||void 0===n?void 0:n.width)/(e&&e.width?e.width:0),scaleY:Number(null===n||void 0===n?void 0:n.height)/(e&&e.height?e.height:0)})}),{crossOrigin:"anonymous"}),c((function(t){return Object(r.a)(Object(r.a)({},t),{},{backgroundImage:e,canvas:n})})),u(!1))},handleChangeColor:function(e){var n=t.canvas;n&&n.getActiveObject()&&(n.getActiveObject().set("fill",e.target.value),n.renderAll()),c((function(t){return Object(r.a)(Object(r.a)({},t),{},{canvas:n,color:e.target.value})}))},handleChangeStyleText:function(e,n){var a=t.canvas,i="";"underline"===n&&(i=e.target.checked),"fontWeight"===n&&(i=e.target.checked?"bold":""),"fontStyle"===n&&(i=e.target.checked?"italic":""),a&&a.getActiveObject()&&(a.getActiveObject().set(n,i),a.renderAll()),c((function(e){return Object(r.a)(Object(r.a)({},e),{},{canvas:a})}))},handleChangeFontSize:function(e){var n=t.canvas;n&&n.getActiveObject()&&(n.getActiveObject().set("fontSize",e.target.value),n.renderAll()),c((function(t){return Object(r.a)(Object(r.a)({},t),{},{canvas:n,fontSize:e.target.value})}))},handleUploadImage:function(e){var n=t.canvas;if(n&&e.target.files){var a=URL.createObjectURL(e.target.files[0]);d.fabric.Image.fromURL(a,(function(e){n.add(e),n.renderAll()}),{scaleX:.15,scaleY:.15})}c((function(e){return Object(r.a)(Object(r.a)({},e),{},{canvas:n})}))},handleOnChangeBackgroundColor:function(e){var n=t.canvas;g(),n&&(n.backgroundColor=e.hex,n.renderAll()),c((function(t){return Object(r.a)(Object(r.a)({},t),{},{canvas:n,backgroundColor:e.hex})}))},handleUploadImageWithLink:function(){var e=t.canvas,n=t.linkImage;e&&n&&(d.fabric.Image.fromURL(n,(function(n){var t;(null===(t=n.getElement())||void 0===t?void 0:t.src)?(e.add(n),e.renderAll()):alert("\u043d\u0435\u0432\u0435\u0440\u043d\u0430\u044f \u0441\u0441\u044b\u043b\u043a\u0430")}),{scaleX:.15,scaleY:.15}),c((function(n){return Object(r.a)(Object(r.a)({},n),{},{canvas:e,linkImage:""})})))},handleOnChangeLink:function(e){c((function(n){return Object(r.a)(Object(r.a)({},n),{},{linkImage:e.target.value})}))},isModal:o,setIsModal:u}}(),n=e.state,t=e.container,c=e.handleAddText,i=e.handleDownload,l=e.handleAddBackground,b=e.handleRemoveBackground,h=e.handleChangeColor,g=e.handleChangeStyleText,v=e.handleChangeFontSize,f=e.handleUploadImage,O=e.handleOnChangeBackgroundColor,m=e.handleUploadImageWithLink,x=e.handleOnChangeLink,p=e.isModal,k=e.setIsModal;return Object(j.jsxs)(j.Fragment,{children:[Object(j.jsxs)("div",{children:[Object(j.jsxs)("div",{className:"settingns-wrapper",children:[Object(j.jsx)("div",{className:"setting-item",children:Object(j.jsx)("button",{onClick:function(){return c()},children:"\u0414\u043e\u0431\u0430\u0432\u0438\u0442\u044c \u0442\u0435\u043a\u0441\u0442"})}),Object(j.jsx)("div",{className:"setting-item",children:Object(j.jsxs)("label",{children:[Object(j.jsx)("input",{type:"color",value:n.color,onChange:h}),"\u0446\u0432\u0435\u0442 \u0442\u0435\u043a\u0441\u0442\u0430"]})}),Object(j.jsx)("div",{className:"setting-item",children:Object(j.jsxs)("label",{children:[Object(j.jsx)("input",{type:"checkbox",name:"fonttype",onChange:function(e){g(e,"fontWeight")}}),"Bold"]})}),Object(j.jsx)("div",{className:"setting-item",children:Object(j.jsxs)("label",{children:[Object(j.jsx)("input",{type:"checkbox",name:"fonttype",onChange:function(e){g(e,"fontStyle")}}),"\u041a\u0443\u0440\u0441\u0438\u0432"]})}),Object(j.jsx)("div",{className:"setting-item",children:Object(j.jsxs)("label",{children:[Object(j.jsx)("input",{type:"checkbox",name:"fonttype",onChange:function(e){g(e,"underline")}}),"\u041f\u043e\u0434\u0447\u0435\u0440\u043a\u043d\u0443\u0442\u044b\u0439"]})}),Object(j.jsx)("div",{className:"setting-item",children:Object(j.jsxs)("label",{children:[Object(j.jsx)("input",{type:"range",min:"1",max:"120",step:"1",value:n.fontSize,onChange:v}),"\u0420\u0430\u0437\u043c\u0435\u0440 \u0448\u0440\u0438\u0444\u0442\u0430"]})})]}),Object(j.jsxs)("div",{className:"settingns-wrapper",children:[Object(j.jsx)("div",{className:"setting-item",children:Object(j.jsx)("button",{onClick:function(){return k(!0)},children:"\u0414\u043e\u0431\u0430\u0432\u0438\u0442\u044c \u0424\u043e\u043d"})}),Object(j.jsx)("div",{className:"setting-item",children:Object(j.jsx)("button",{onClick:b,children:"\u0423\u0434\u0430\u043b\u0438\u0442\u044c \u0424\u043e\u043d"})}),Object(j.jsx)("div",{className:"setting-item",children:Object(j.jsxs)("label",{htmlFor:"img",children:["Upload image",Object(j.jsx)("input",{type:"file",id:"img",name:"img",accept:"image/*",onChange:f})]})}),Object(j.jsxs)("div",{className:"setting-item",children:[Object(j.jsx)("input",{value:n.linkImage,type:"text",onChange:x}),Object(j.jsx)("button",{onClick:m,children:"\u0437\u0430\u0433\u0440\u0443\u0437\u0438\u0442\u044c \u043f\u043e \u0441\u0441\u044b\u043b\u043a\u0435"})]})]}),Object(j.jsx)("a",{className:"download",download:"image.png",href:n.href,onClick:i,children:"\u0421\u043a\u0430\u0447\u0430\u0442\u044c \u043a\u0430\u0440\u0442\u0438\u043d\u043a\u0443"}),Object(j.jsx)(o.a,{color:n.backgroundColor,onChange:O}),Object(j.jsx)("canvas",{id:"canvas",style:{width:"100%",height:"100%",border:"2px solid black",margin:"auto"},ref:t})]}),p&&Object(j.jsx)("div",{className:"modal",children:Object(j.jsx)("div",{className:"modal-body",children:Object(j.jsxs)("div",{className:"modal-inner",children:[Object(j.jsx)("div",{className:"modal-close",onClick:function(){return k(!1)},children:"X"}),Object(j.jsx)("div",{className:"modal-content",children:u.map((function(e){var n=e.id,t=e.url;return Object(j.jsx)("div",{children:Object(j.jsx)("img",{onClick:function(){return l(t)},src:t,alt:""})},n)}))})]})})})]})};var h=function(){return Object(j.jsx)("div",{className:"App",children:Object(j.jsx)("header",{className:"App-header",children:Object(j.jsx)(b,{})})})},g=function(e){e&&e instanceof Function&&t.e(3).then(t.bind(null,203)).then((function(n){var t=n.getCLS,a=n.getFID,c=n.getFCP,i=n.getLCP,l=n.getTTFB;t(e),a(e),c(e),i(e),l(e)}))};l.a.render(Object(j.jsx)(c.a.StrictMode,{children:Object(j.jsx)(h,{})}),document.getElementById("root")),g()},83:function(e,n,t){},84:function(e,n,t){}},[[201,1,2]]]);
//# sourceMappingURL=main.d15115e8.chunk.js.map