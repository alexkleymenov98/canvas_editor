{"version":3,"sources":["component/Editor/shared.ts","component/Editor/index.tsx","component/Editor/hook.ts","App.tsx","reportWebVitals.ts","index.tsx"],"names":["listImages","id","url","Editor","useState","canvas","backgroundColor","fontSize","href","color","canvasScale","backgroundImage","linkImage","data","setData","isModal","setIsModal","container","useRef","deleteActiveObject","useCallback","getActiveObjects","forEach","object","remove","prev","onHandleKeyDown","event","code","handleRemoveBackground","setBackgroundImage","renderAll","useLayoutEffect","fabric","Canvas","height","current","clientHeight","width","clientWidth","preserveObjectStacking","document","removeEventListener","useEffect","addEventListener","state","handleAddText","value","add","IText","fontFamily","fill","padding","left","handleDownload","image","toDataURL","format","quality","handleAddBackground","Image","fromURL","img","scaleX","Number","scaleY","crossOrigin","handleChangeColor","getActiveObject","set","target","handleChangeStyleText","keyStyle","checked","handleChangeFontSize","handleUploadImage","files","URL","createObjectURL","handleOnChangeBackgroundColor","hex","handleUploadImageWithLink","getElement","src","alert","handleOnChangeLink","useEditor","className","onClick","type","onChange","name","e","min","max","step","htmlFor","accept","download","style","border","margin","ref","map","alt","App","reportWebVitals","onPerfEntry","Function","then","getCLS","getFID","getFCP","getLCP","getTTFB","ReactDOM","render","StrictMode","getElementById"],"mappings":"uPAKaA,EAAuB,CAChC,CACIC,GAAI,EACJC,IAAK,uEAET,CACID,GAAI,EACJC,IAAK,6FAET,CACID,GAAI,EACJC,IAAK,kFAET,CACID,GAAI,EACJC,IAAK,8E,OC4IEC,EAzJiB,WAC5B,MC0B+B,WAC/B,MAAwBC,mBAAgB,CACpCC,OAAQ,KACRC,gBAAiB,UACjBC,SAAU,KACVC,KAAM,GACNC,MAAO,UACPC,YAAa,EACbC,gBAAiB,GACjBC,UAAU,KARd,mBAAOC,EAAP,KAAaC,EAAb,KAWA,EAA8BV,oBAAS,GAAvC,mBAAOW,EAAP,KAAgBC,EAAhB,KAEMC,EAAYC,iBAA0B,MAmEtCC,EAAqBC,uBAAY,WACnC,IAAQf,EAAWQ,EAAXR,OACLA,IACCA,EAAOgB,mBAAmBC,SAAQ,SAACC,GAC/BlB,EAAOmB,OAAOD,MAElBT,GAAQ,SAACW,GAAD,mBAAC,eAAYA,GAAb,IAAmBpB,iBAEjC,CAACQ,IAGGa,EAAkB,SAACC,GACF,WAAfA,EAAMC,MACNT,KAgBFU,EAAyB,WAC3B,IAAQxB,EAAWQ,EAAXR,OACJA,GAAUA,EAAOM,kBAGjBN,EAAOyB,mBAAmB,MAC1BzB,EAAO0B,YACPjB,GAAQ,SAACW,GAAD,mBAAC,eAAYA,GAAb,IAAmBd,gBAAgB,GAAGN,gBA+FtD,OAnBA2B,2BAAgB,WAAK,IAAD,QACV3B,EAAS,IAAI4B,SAAOC,OAAO,SAAU,CACvC5B,gBAAiB,UACjB6B,OAAM,oBAAElB,EAAUmB,eAAZ,aAAE,EAAmBC,oBAArB,QAAqC,IAC3CC,MAAK,oBAAErB,EAAUmB,eAAZ,aAAE,EAAmBG,mBAArB,QAAoC,IACzCC,wBAAwB,IAG5B,OADA1B,GAAQ,SAACW,GAAD,mBAAC,eAAYA,GAAb,IAAmBpB,cACpB,WACHoC,SAASC,oBAAoB,UAAWhB,MAE9C,IAEFiB,qBAAU,WACH9B,EAAKR,QACJoC,SAASG,iBAAiB,UAAWlB,KAE3C,CAACb,EAAKR,SAED,CACHwC,MAAMhC,EACNI,YACA6B,cAlMyD,SAACC,GAC1D,IAAO1C,EAAiBQ,EAAjBR,OAAQI,EAASI,EAATJ,MACZJ,GACCA,EAAO2C,IACH,IAAIf,SAAOgB,MAAX,UAAoBF,GAAS,kCAAW,CACpCG,WAAY,QACZC,KAAM1C,EACNF,SAAU,GACV6C,QAAS,EACTC,KAAM,KAIlBvC,GAAQ,SAACW,GAAD,mBAAC,eAAYA,GAAb,IAAmBpB,eAsL3BiD,eArHmB,WACnB,GAAGzC,EAAKR,OAAO,CACX,IAAMkD,EAAQ1C,EAAKR,OAAOmD,UAAU,CAChCC,OAAQ,MACRC,QAAS,IAEb5C,GAAQ,SAACW,GAAD,mBAAC,eAAYA,GAAb,IAAmBjB,KAAK+C,SAgHpC1B,yBACA8B,oBAtFqE,SAACzD,GACtE,IAAOG,EAAWQ,EAAXR,OACJA,IACCwB,IACAI,SAAO2B,MAAMC,QACT3D,GACA,SAAC4D,GACGzD,EAAOyB,mBACHgC,GACA,WACIzD,EAAO0B,cAEX,CACIgC,OAAQC,OAAM,OAAC3D,QAAD,IAACA,OAAD,EAACA,EAAQiC,QAAUwB,GAAOA,EAAIxB,MAAQwB,EAAIxB,MAAQ,GAChE2B,OAAQD,OAAM,OAAC3D,QAAD,IAACA,OAAD,EAACA,EAAQ8B,SAAW2B,GAAOA,EAAI3B,OAAS2B,EAAI3B,OAAS,OAI/E,CAAE+B,YAAa,cAEnBpD,GAAQ,SAACW,GAAD,mBAAC,eAAYA,GAAb,IAAmBd,gBAAgBT,EAAKG,cAChDW,GAAW,KAkEfmD,kBArLiE,SAACxC,GAClE,IAAQtB,EAAWQ,EAAXR,OACJA,GAAUA,EAAO+D,oBACjB/D,EAAO+D,kBAAkBC,IAAI,OAAQ1C,EAAM2C,OAAOvB,OAClD1C,EAAO0B,aAEXjB,GAAQ,SAACW,GAAD,mBAAC,eAAYA,GAAb,IAAmBpB,SAAQI,MAAMkB,EAAM2C,OAAOvB,YAgLtDwB,sBA5KyE,SAAC5C,EAAO6C,GACjF,IAAQnE,EAAWQ,EAAXR,OACJ0C,EAA0B,GACd,cAAbyB,IACCzB,EAAQpB,EAAM2C,OAAOG,SAET,eAAbD,IACCzB,EAAQpB,EAAM2C,OAAOG,QAAU,OAAO,IAE1B,cAAbD,IACCzB,EAAQpB,EAAM2C,OAAOG,QAAU,SAAS,IAExCpE,GAAUA,EAAO+D,oBAEjB/D,EAAO+D,kBAAkBC,IAAIG,EAAUzB,GACvC1C,EAAO0B,aAEXjB,GAAQ,SAACW,GAAD,mBAAC,eAAYA,GAAb,IAAmBpB,eA4J3BqE,qBAvJuE,SAAC/C,GACxE,IAAQtB,EAAWQ,EAAXR,OACJA,GAAUA,EAAO+D,oBAEjB/D,EAAO+D,kBAAkBC,IAAI,WAAY1C,EAAM2C,OAAOvB,OACtD1C,EAAO0B,aAEXjB,GAAQ,SAACW,GAAD,mBAAC,eAAYA,GAAb,IAAmBpB,SAAQE,SAASoB,EAAM2C,OAAOvB,YAiJzD4B,kBAhEiE,SAAChD,GAClE,IAAQtB,EAAWQ,EAAXR,OACR,GAAGA,GAAUsB,EAAM2C,OAAOM,MAAM,CAC5B,IAAM1E,EAAM2E,IAAIC,gBAAgBnD,EAAM2C,OAAOM,MAAM,IACnD3C,SAAO2B,MAAMC,QACT3D,GACA,SAAC4D,GACGzD,EAAO2C,IAAIc,GACXzD,EAAO0B,cACT,CAAEgC,OAAQ,IAAME,OAAQ,MAGlCnD,GAAQ,SAACW,GAAD,mBAAC,eAAYA,GAAb,IAAmBpB,eAqD3B0E,8BAtGyF,SAACtE,GAC1F,IAAQJ,EAAWQ,EAAXR,OACRwB,IACIxB,IACAA,EAAOC,gBAAkBG,EAAMuE,IAC/B3E,EAAO0B,aAEXjB,GAAQ,SAACW,GAAD,mBAAC,eAAYA,GAAb,IAAmBpB,SAAQC,gBAAgBG,EAAMuE,UAgGzDC,0BAlDiF,WACjF,IAAO5E,EAAqBQ,EAArBR,OAAQO,EAAaC,EAAbD,UACZP,GAAUO,IACTqB,SAAO2B,MAAMC,QACTjD,GACA,SAACkD,GAAS,IAAD,GACF,UAACA,EAAIoB,oBAAL,aAAC,EAAkBC,MAItB9E,EAAO2C,IAAIc,GACXzD,EAAO0B,aAJHqD,MAAM,2FAMd,CAAErB,OAAQ,IAAME,OAAQ,MAE5BnD,GAAQ,SAACW,GAAD,mBAAC,eAAYA,GAAb,IAAmBpB,SAAQO,UAAU,UAoCjDyE,mBAjNmE,SAAC1D,GACpEb,GAAQ,SAACW,GAAD,mBAAC,eAAYA,GAAb,IAAmBb,UAAUe,EAAM2C,OAAOvB,YAiNlDhC,UACAC,cD7OAsE,GAfAzC,EADJ,EACIA,MACA5B,EAFJ,EAEIA,UACA6B,EAHJ,EAGIA,cACAQ,EAJJ,EAIIA,eACAK,EALJ,EAKIA,oBACA9B,EANJ,EAMIA,uBACAsC,EAPJ,EAOIA,kBACAI,EARJ,EAQIA,sBACAG,EATJ,EASIA,qBACAC,EAVJ,EAUIA,kBACAI,EAXJ,EAWIA,8BACAE,EAZJ,EAYIA,0BACAI,EAbJ,EAaIA,mBACAtE,EAdJ,EAcIA,QACAC,EAfJ,EAeIA,WAEJ,OAAO,qCACH,gCACI,sBAAKuE,UAAU,oBAAf,UACI,qBAAKA,UAAU,eAAf,SACI,wBAAQC,QAAS,kBAAM1C,KAAvB,+FAEJ,qBAAKyC,UAAU,eAAf,SAA8B,kCAC1B,uBACIE,KAAK,QACL1C,MAAOF,EAAMpC,MACbiF,SAAUvB,IAJY,qEAQ9B,qBAAKoB,UAAU,eAAf,SACI,kCACI,uBACIE,KAAK,WACLE,KAAK,WACLD,SAAU,SAACE,GACPrB,EAAsBqB,EAAG,iBALrC,YAWJ,qBAAKL,UAAU,eAAf,SACI,kCACI,uBACIE,KAAK,WACLE,KAAK,WACLD,SAAU,SAACE,GACPrB,EAAsBqB,EAAG,gBALrC,4CAWJ,qBAAKL,UAAU,eAAf,SACI,kCACI,uBACIE,KAAK,WACLE,KAAK,WACLD,SAAU,SAACE,GACPrB,EAAsBqB,EAAG,gBALrC,gFAWJ,qBAAKL,UAAU,eAAf,SACI,kCACI,uBACIE,KAAK,QACLI,IAAI,IACJC,IAAI,MACJC,KAAK,IACLhD,MAAOF,EAAMtC,SACbmF,SAAUhB,IAPlB,oFAaR,sBAAKa,UAAU,oBAAf,UACI,qBAAKA,UAAU,eAAf,SACI,wBACIC,QAAS,kBAAIxE,GAAW,IAD5B,mFAKJ,qBAAKuE,UAAU,eAAf,SACI,wBAAQC,QAAS3D,EAAjB,6EAEJ,qBAAK0D,UAAU,eAAf,SACI,wBAAOS,QAAQ,MAAf,yBACI,uBACIP,KAAK,OACLxF,GAAG,MACH0F,KAAK,MACLM,OAAO,UACPP,SAAUf,SAItB,sBAAKY,UAAU,eAAf,UACI,uBACIxC,MAAOF,EAAMjC,UACb6E,KAAK,OACLC,SAAUL,IAEd,wBAAQG,QAASP,EAAjB,4HAKR,mBACIM,UAAU,WACVW,SAAU,YACV1F,KAAMqC,EAAMrC,KACZgF,QAASlC,EAJb,yGASA,cAAC,IAAD,CACI7C,MAAOoC,EAAMvC,gBACboF,SAAUX,IAEd,wBACI9E,GAAG,SACHkG,MAAO,CACH7D,MAAO,OACPH,OAAQ,OACRiE,OAAQ,kBACRC,OAAQ,QAEZC,IAAKrF,OAGZF,GACG,qBAAKwE,UAAU,QAAf,SACI,qBAAKA,UAAU,aAAf,SACI,sBAAKA,UAAU,cAAf,UACI,qBAAKA,UAAU,cAAcC,QAAS,kBAAIxE,GAAW,IAArD,eACA,qBAAKuE,UAAU,gBAAf,SACKvF,EAAWuG,KAAI,gBAAEtG,EAAF,EAAEA,GAAIC,EAAN,EAAMA,IAAN,OAAc,8BAAc,qBAAKsF,QAAS,kBAAM7B,EAAoBzD,IAAMiF,IAAKjF,EAAKsG,IAAI,MAAhEvG,mBEzIrDwG,MAVf,WACE,OACE,qBAAKlB,UAAU,MAAf,SACE,wBAAQA,UAAU,aAAlB,SACM,cAAC,EAAD,SCMGmB,EAZS,SAACC,GACnBA,GAAeA,aAAuBC,UACxC,8BAAqBC,MAAK,YAAkD,IAA/CC,EAA8C,EAA9CA,OAAQC,EAAsC,EAAtCA,OAAQC,EAA8B,EAA9BA,OAAQC,EAAsB,EAAtBA,OAAQC,EAAc,EAAdA,QAC3DJ,EAAOH,GACPI,EAAOJ,GACPK,EAAOL,GACPM,EAAON,GACPO,EAAQP,OCHdQ,IAASC,OACP,cAAC,IAAMC,WAAP,UACE,cAAC,EAAD,MAEF5E,SAAS6E,eAAe,SAM1BZ,K","file":"static/js/main.d15115e8.chunk.js","sourcesContent":["export type TImage = {\r\n    id: number;\r\n    url: string;\r\n}\r\n\r\nexport const listImages: TImage[] = [\r\n    {\r\n        id: 0,\r\n        url: 'https://cdn.pixabay.com/photo/2015/04/23/22/00/tree-736885__480.jpg'\r\n    },\r\n    {\r\n        id: 1,\r\n        url: 'https://cdn.pixabay.com/photo/2021/11/01/08/39/petit-minou-lighthouse-6759731_960_720.jpg'\r\n    },\r\n    {\r\n        id: 2,\r\n        url: 'https://cdn.pixabay.com/photo/2021/02/13/13/20/soap-bubble-6011516_960_720.jpg'\r\n    },\r\n    {\r\n        id: 3,\r\n        url: 'https://cdn.pixabay.com/photo/2020/07/18/11/10/clouds-5416914_960_720.jpg'\r\n    }\r\n]\r\n\r\n","import React, {FC} from \"react\";\r\nimport {TwitterPicker} from \"react-color\";\r\nimport {useEditor} from \"./hook\";\r\nimport { listImages } from \"./shared\";\r\n\r\ntype EditorProps = {}\r\n\r\nconst Editor: FC<EditorProps> = () => {\r\n    const {\r\n        state,\r\n        container,\r\n        handleAddText,\r\n        handleDownload,\r\n        handleAddBackground,\r\n        handleRemoveBackground,\r\n        handleChangeColor,\r\n        handleChangeStyleText,\r\n        handleChangeFontSize,\r\n        handleUploadImage,\r\n        handleOnChangeBackgroundColor,\r\n        handleUploadImageWithLink,\r\n        handleOnChangeLink,\r\n        isModal,\r\n        setIsModal,\r\n    } = useEditor();\r\n    return <>\r\n        <div>\r\n            <div className=\"settingns-wrapper\">\r\n                <div className=\"setting-item\">\r\n                    <button onClick={() => handleAddText()}>Добавить текст</button>\r\n                </div>\r\n                <div className=\"setting-item\"><label>\r\n                    <input\r\n                        type=\"color\"\r\n                        value={state.color}\r\n                        onChange={handleChangeColor}\r\n                    />\r\n                    цвет текста\r\n                </label></div>\r\n                <div className=\"setting-item\">\r\n                    <label>\r\n                        <input\r\n                            type=\"checkbox\"\r\n                            name=\"fonttype\"\r\n                            onChange={(e) => {\r\n                                handleChangeStyleText(e, 'fontWeight')\r\n                            }}\r\n                        />\r\n                        Bold\r\n                    </label>\r\n                </div>\r\n                <div className=\"setting-item\">\r\n                    <label>\r\n                        <input\r\n                            type=\"checkbox\"\r\n                            name=\"fonttype\"\r\n                            onChange={(e) => {\r\n                                handleChangeStyleText(e, 'fontStyle')\r\n                            }}\r\n                        />\r\n                        Курсив\r\n                    </label>\r\n                </div>\r\n                <div className=\"setting-item\">\r\n                    <label>\r\n                        <input\r\n                            type=\"checkbox\"\r\n                            name=\"fonttype\"\r\n                            onChange={(e) => {\r\n                                handleChangeStyleText(e, 'underline')\r\n                            }}\r\n                        />\r\n                        Подчеркнутый\r\n                    </label>\r\n                </div>\r\n                <div className=\"setting-item\">\r\n                    <label>\r\n                        <input\r\n                            type=\"range\"\r\n                            min=\"1\"\r\n                            max=\"120\"\r\n                            step=\"1\"\r\n                            value={state.fontSize}\r\n                            onChange={handleChangeFontSize}\r\n                        />\r\n                        Размер шрифта\r\n                    </label>\r\n                </div>\r\n            </div>\r\n            <div className=\"settingns-wrapper\">\r\n                <div className=\"setting-item\">\r\n                    <button\r\n                        onClick={()=>setIsModal(true)}>Добавить\r\n                        Фон\r\n                    </button>\r\n                </div>\r\n                <div className=\"setting-item\">\r\n                    <button onClick={handleRemoveBackground}>Удалить Фон</button>\r\n                </div>\r\n                <div className=\"setting-item\">\r\n                    <label htmlFor=\"img\">Upload image\r\n                        <input\r\n                            type=\"file\"\r\n                            id=\"img\"\r\n                            name=\"img\"\r\n                            accept=\"image/*\"\r\n                            onChange={handleUploadImage}\r\n                        />\r\n                    </label>\r\n                </div>\r\n                <div className=\"setting-item\">\r\n                    <input\r\n                        value={state.linkImage}\r\n                        type=\"text\"\r\n                        onChange={handleOnChangeLink}\r\n                    />\r\n                    <button onClick={handleUploadImageWithLink}>загрузить по ссылке</button>\r\n                </div>\r\n            </div>\r\n\r\n\r\n            <a\r\n                className=\"download\"\r\n                download={\"image.png\"}\r\n                href={state.href}\r\n                onClick={handleDownload}\r\n            >\r\n                Скачать картинку\r\n            </a>\r\n\r\n            <TwitterPicker\r\n                color={state.backgroundColor}\r\n                onChange={handleOnChangeBackgroundColor}\r\n            />\r\n            <canvas\r\n                id=\"canvas\"\r\n                style={{\r\n                    width: \"100%\",\r\n                    height: \"100%\",\r\n                    border: \"2px solid black\",\r\n                    margin: \"auto\"\r\n                }}\r\n                ref={container}\r\n            ></canvas>\r\n        </div>\r\n        {isModal && (\r\n            <div className=\"modal\">\r\n                <div className=\"modal-body\">\r\n                    <div className=\"modal-inner\">\r\n                        <div className=\"modal-close\" onClick={()=>setIsModal(false)}>X</div>\r\n                        <div className=\"modal-content\">\r\n                            {listImages.map(({id, url})=>(<div key={id}><img onClick={() => handleAddBackground(url)} src={url} alt=\"\"/></div>))}\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n        )}\r\n    </>\r\n}\r\n\r\nexport default Editor;","import {ChangeEvent, RefObject, useCallback, useEffect, useLayoutEffect, useRef, useState} from \"react\";\r\nimport { fabric } from \"fabric\";\r\nimport {Canvas } from \"fabric/fabric-impl\";\r\nimport {ColorResult} from \"react-color\";\r\n\r\ntype TData = {\r\n    canvas: Canvas | null;\r\n    backgroundColor: string;\r\n    fontSize: string;\r\n    href: string;\r\n    color: string;\r\n    canvasScale: number;\r\n    backgroundImage: string;\r\n    linkImage:string;\r\n}\r\ntype TKeyStyle = 'fontWeight'|'fontStyle'|'underline';\r\n\r\nexport type TFUEditor = ()=>{\r\n    state:TData;\r\n    container:RefObject<HTMLCanvasElement>;\r\n    handleAddText:(value?:string)=>void;\r\n    handleDownload:()=>void;\r\n    handleAddBackground:(url:string)=>void;\r\n    handleRemoveBackground:()=>void;\r\n    handleChangeColor:(event:ChangeEvent<HTMLInputElement>)=>void;\r\n    handleChangeStyleText:(event:ChangeEvent<HTMLInputElement>,keyStyle:TKeyStyle)=>void;\r\n    handleChangeFontSize:(event:ChangeEvent<HTMLInputElement>)=>void;\r\n    handleUploadImage:(event:ChangeEvent<HTMLInputElement>)=>void;\r\n    handleOnChangeBackgroundColor:(color:ColorResult)=>void;\r\n    handleUploadImageWithLink:()=>void;\r\n    handleOnChangeLink:(event:ChangeEvent<HTMLInputElement>)=>void;\r\n    isModal:boolean;\r\n    setIsModal:(v:boolean)=>void;\r\n}\r\nexport const useEditor:TFUEditor = ()=>{\r\n    const [data, setData] = useState<TData>({\r\n        canvas: null,\r\n        backgroundColor: \"#ffffff\",\r\n        fontSize: '24',\r\n        href: \"\",\r\n        color: \"#000000\",\r\n        canvasScale: 1,\r\n        backgroundImage: \"\",\r\n        linkImage:'',\r\n    });\r\n\r\n    const [isModal, setIsModal] = useState(false);\r\n\r\n    const container = useRef<HTMLCanvasElement>(null);\r\n\r\n    const handleOnChangeLink:ReturnType<TFUEditor>['handleOnChangeLink'] = (event)=>{\r\n        setData((prev)=>({...prev, linkImage:event.target.value}))\r\n    }\r\n\r\n    /** функция добавляет текст на canvas */\r\n    const handleAddText:ReturnType<TFUEditor>['handleAddText'] = (value)=>{\r\n        const {canvas, color} = data;\r\n        if(canvas){\r\n            canvas.add(\r\n                new fabric.IText(`${value || 'Текст'}`, {\r\n                    fontFamily: \"arial\",\r\n                    fill: color,\r\n                    fontSize: 29,\r\n                    padding: 5,\r\n                    left: 0,\r\n                })\r\n            )\r\n        }\r\n        setData((prev)=>({...prev, canvas}));\r\n    }\r\n\r\n    /** функция изменяет цвет выбранного текста */\r\n    const handleChangeColor:ReturnType<TFUEditor>['handleChangeColor'] = (event) => {\r\n        const { canvas } = data;\r\n        if (canvas && canvas.getActiveObject()) {\r\n            canvas.getActiveObject().set(\"fill\", event.target.value);\r\n            canvas.renderAll();\r\n        }\r\n        setData((prev)=>({...prev, canvas, color:event.target.value}));\r\n    };\r\n\r\n    /** функция изменяет стили текста по ключам */\r\n    const handleChangeStyleText:ReturnType<TFUEditor>['handleChangeStyleText'] = (event, keyStyle)=>{\r\n        const { canvas } = data;\r\n        let value:string | boolean  = '';\r\n        if(keyStyle === 'underline'){\r\n            value = event.target.checked;\r\n        }\r\n        if(keyStyle === 'fontWeight'){\r\n            value = event.target.checked ? 'bold':'';\r\n        }\r\n        if(keyStyle === 'fontStyle'){\r\n            value = event.target.checked ? 'italic':'';\r\n        }\r\n        if (canvas && canvas.getActiveObject()) {\r\n            // @ts-ignore\r\n            canvas.getActiveObject().set(keyStyle, value);\r\n            canvas.renderAll();\r\n        }\r\n        setData((prev)=>({...prev, canvas}))\r\n\r\n    }\r\n\r\n    /** функция изменяет размер выделенного текста */\r\n    const handleChangeFontSize:ReturnType<TFUEditor>['handleChangeFontSize'] = (event)=>{\r\n        const { canvas } = data;\r\n        if (canvas && canvas.getActiveObject()) {\r\n            // @ts-ignore\r\n            canvas.getActiveObject().set(\"fontSize\", event.target.value);\r\n            canvas.renderAll();\r\n        }\r\n        setData((prev)=>({...prev, canvas, fontSize:event.target.value}))\r\n    }\r\n\r\n    /** функция удаляет активный элемент */\r\n    const deleteActiveObject = useCallback(() => {\r\n        const { canvas } = data;\r\n        if(canvas){\r\n            canvas.getActiveObjects().forEach((object) => {\r\n                canvas.remove(object);\r\n            });\r\n            setData((prev)=>({...prev, canvas}))\r\n        }\r\n    },[data]);\r\n\r\n    /** функция вызывает удаление активного елемента по нажатия на Delete */\r\n    const onHandleKeyDown = (event:KeyboardEvent) => {\r\n        if (event.code === 'Delete') {\r\n            deleteActiveObject();\r\n        }\r\n    };\r\n\r\n    /** функция скачаивает изображение на canvas */\r\n    const handleDownload = () => {\r\n        if(data.canvas){\r\n            const image = data.canvas.toDataURL({\r\n                format: \"png\",\r\n                quality: 1\r\n            });\r\n            setData((prev)=>({...prev, href:image}))\r\n        }\r\n    };\r\n\r\n    /** функция удаляет фон canvas */\r\n    const handleRemoveBackground = () => {\r\n        const { canvas } = data;\r\n        if (canvas && canvas.backgroundImage) {\r\n\r\n            // @ts-ignore\r\n            canvas.setBackgroundImage(null);\r\n            canvas.renderAll();\r\n            setData((prev)=>({...prev, backgroundImage:'',canvas}))\r\n        }\r\n    };\r\n\r\n    const handleOnChangeBackgroundColor:ReturnType<TFUEditor>['handleOnChangeBackgroundColor'] = (color) => {\r\n        const { canvas } = data;\r\n        handleRemoveBackground();\r\n        if (canvas) {\r\n            canvas.backgroundColor = color.hex;\r\n            canvas.renderAll();\r\n        }\r\n        setData((prev)=>({...prev, canvas, backgroundColor:color.hex}))\r\n    };\r\n\r\n    /** функция добавляет фон по ссылке */\r\n    const handleAddBackground:ReturnType<TFUEditor>['handleAddBackground'] = (url) => {\r\n        const {canvas } = data;\r\n        if(canvas){\r\n            handleRemoveBackground();\r\n            fabric.Image.fromURL(\r\n                url,\r\n                (img) => {\r\n                    canvas.setBackgroundImage(\r\n                        img,\r\n                        () => {\r\n                            canvas.renderAll();\r\n                        },\r\n                        {\r\n                            scaleX: Number(canvas?.width) / (img && img.width ? img.width : 0),\r\n                            scaleY: Number(canvas?.height) / (img && img.height ? img.height : 0)\r\n                        }\r\n                    );\r\n                },\r\n                { crossOrigin: \"anonymous\" }\r\n            );\r\n            setData((prev)=>({...prev, backgroundImage:url, canvas}));\r\n            setIsModal(false);\r\n        }\r\n    };\r\n\r\n    /** функция загружает локальное изображение с компьютера */\r\n    const handleUploadImage:ReturnType<TFUEditor>['handleUploadImage'] = (event)=>{\r\n        const { canvas } = data;\r\n        if(canvas && event.target.files){\r\n            const url = URL.createObjectURL(event.target.files[0]);\r\n            fabric.Image.fromURL(\r\n                url,\r\n                (img) => {\r\n                    canvas.add(img);\r\n                    canvas.renderAll();\r\n                },{ scaleX: 0.15, scaleY: 0.15 }\r\n            );\r\n        }\r\n        setData((prev)=>({...prev, canvas}));\r\n    }\r\n\r\n    /** функция загрузки файла по ссылке */\r\n    const handleUploadImageWithLink:ReturnType<TFUEditor>['handleUploadImageWithLink'] = ()=>{\r\n        const {canvas, linkImage} = data;\r\n        if(canvas && linkImage){\r\n            fabric.Image.fromURL(\r\n                linkImage,\r\n                (img) => {\r\n                    if(!img.getElement()?.src){\r\n                        alert('неверная ссылка')\r\n                     return;\r\n                    }\r\n                    canvas.add(img);\r\n                    canvas.renderAll();\r\n                },\r\n                { scaleX: 0.15, scaleY: 0.15 }\r\n            );\r\n            setData((prev)=>({...prev, canvas, linkImage:''}))\r\n        }\r\n    }\r\n\r\n    useLayoutEffect(()=>{\r\n        const canvas = new fabric.Canvas(\"canvas\", {\r\n            backgroundColor: \"#FDEFEF\",\r\n            height: container.current?.clientHeight ?? 500,\r\n            width: container.current?.clientWidth ?? 500,\r\n            preserveObjectStacking: true\r\n        });\r\n        setData((prev)=>({...prev, canvas}));\r\n        return ()=>{\r\n            document.removeEventListener(\"keydown\", onHandleKeyDown);\r\n        }\r\n    },[]);\r\n\r\n    useEffect(()=>{\r\n        if(data.canvas){\r\n            document.addEventListener(\"keydown\", onHandleKeyDown);\r\n        }\r\n    },[data.canvas])\r\n\r\n    return {\r\n        state:data,\r\n        container,\r\n        handleAddText,\r\n        handleDownload,\r\n        handleRemoveBackground,\r\n        handleAddBackground,\r\n        handleChangeColor,\r\n        handleChangeStyleText,\r\n        handleChangeFontSize,\r\n        handleUploadImage,\r\n        handleOnChangeBackgroundColor,\r\n        handleUploadImageWithLink,\r\n        handleOnChangeLink,\r\n        isModal,\r\n        setIsModal,\r\n    }\r\n}","import React from 'react';\r\nimport './App.css';\r\nimport Editor from \"./component/Editor\";\r\n\r\nfunction App() {\r\n  return (\r\n    <div className=\"App\">\r\n      <header className=\"App-header\">\r\n            <Editor/>\r\n      </header>\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default App;\r\n","import { ReportHandler } from 'web-vitals';\r\n\r\nconst reportWebVitals = (onPerfEntry?: ReportHandler) => {\r\n  if (onPerfEntry && onPerfEntry instanceof Function) {\r\n    import('web-vitals').then(({ getCLS, getFID, getFCP, getLCP, getTTFB }) => {\r\n      getCLS(onPerfEntry);\r\n      getFID(onPerfEntry);\r\n      getFCP(onPerfEntry);\r\n      getLCP(onPerfEntry);\r\n      getTTFB(onPerfEntry);\r\n    });\r\n  }\r\n};\r\n\r\nexport default reportWebVitals;\r\n","import React from 'react';\r\nimport ReactDOM from 'react-dom';\r\nimport './index.css';\r\nimport App from './App';\r\nimport reportWebVitals from './reportWebVitals';\r\n\r\nReactDOM.render(\r\n  <React.StrictMode>\r\n    <App />\r\n  </React.StrictMode>,\r\n  document.getElementById('root')\r\n);\r\n\r\n// If you want to start measuring performance in your app, pass a function\r\n// to log results (for example: reportWebVitals(console.log))\r\n// or send to an analytics endpoint. Learn more: https://bit.ly/CRA-vitals\r\nreportWebVitals();\r\n"],"sourceRoot":""}