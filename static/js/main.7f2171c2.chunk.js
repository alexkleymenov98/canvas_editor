(this.webpackJsonpcanvas=this.webpackJsonpcanvas||[]).push([[0],{197:function(e,n){},198:function(e,n){},199:function(e,n){},201:function(e,n,t){"use strict";t.r(n);var a=t(0),c=t.n(a),i=t(72),r=t.n(i),l=(t(83),t(84),t(77)),o=t(4),s=t(78),d=t(13),u=function(){var e=Object(a.useState)({canvas:null,backgroundColor:"#ffffff",fontSize:"24",href:"",color:"#000000",canvasScale:1,backgroundImage:"",linkImage:""}),n=Object(s.a)(e,2),t=n[0],c=n[1],i=Object(a.useRef)(null),r=function(e){46===e.which&&function(){var e=t.canvas;e&&e.getActiveObjects().forEach((function(n){e.remove(n)}))}()},l=function(){var e=t.canvas;e&&e.backgroundImage&&(e.setBackgroundImage(null),e.renderAll(),c((function(n){return Object(o.a)(Object(o.a)({},n),{},{backgroundImage:"",canvas:e})})))};return Object(a.useEffect)((function(){var e,n,t,a,l=new d.fabric.Canvas("canvas",{backgroundColor:"#FDEFEF",height:null!==(e=null===(n=i.current)||void 0===n?void 0:n.clientHeight)&&void 0!==e?e:500,width:null!==(t=null===(a=i.current)||void 0===a?void 0:a.clientWidth)&&void 0!==t?t:500,preserveObjectStacking:!0});return c((function(e){return Object(o.a)(Object(o.a)({},e),{},{canvas:l})})),document.addEventListener("keydown",r),function(){document.removeEventListener("keydown",r)}}),[]),{state:t,container:i,handleAddText:function(e){var n=t.canvas,a=t.color;n&&n.add(new d.fabric.IText("".concat(e||"\u0422\u0435\u043a\u0441\u0442"),{fontFamily:"arial",fill:a,fontSize:29,padding:5,left:0})),c((function(e){return Object(o.a)(Object(o.a)({},e),{},{canvas:n})}))},handleDownload:function(){if(t.canvas){var e=t.canvas.toDataURL({format:"png",quality:1});c((function(n){return Object(o.a)(Object(o.a)({},n),{},{href:e})}))}},handleRemoveBackground:l,handleAddBackground:function(e){var n=t.canvas;n&&(l(),d.fabric.Image.fromURL(e,(function(e){n.setBackgroundImage(e,(function(){n.renderAll()}),{scaleX:Number(null===n||void 0===n?void 0:n.width)/(e&&e.width?e.width:0),scaleY:Number(null===n||void 0===n?void 0:n.height)/(e&&e.height?e.height:0)})}),{crossOrigin:"anonymous"}),c((function(t){return Object(o.a)(Object(o.a)({},t),{},{backgroundImage:e,canvas:n})})))},handleChangeColor:function(e){var n=t.canvas;n&&n.getActiveObject()&&(n.getActiveObject().set("fill",e.target.value),n.renderAll()),c((function(t){return Object(o.a)(Object(o.a)({},t),{},{canvas:n,color:e.target.value})}))},handleChangeStyleText:function(e,n){var a=t.canvas,i="";"underline"===n&&(i=e.target.checked),"fontWeight"===n&&(i=e.target.checked?"bold":""),"fontStyle"===n&&(i=e.target.checked?"italic":""),a&&a.getActiveObject()&&(a.getActiveObject().set(n,i),a.renderAll()),c((function(e){return Object(o.a)(Object(o.a)({},e),{},{canvas:a})}))},handleChangeFontSize:function(e){var n=t.canvas;n&&n.getActiveObject()&&(n.getActiveObject().set("fontSize",e.target.value),n.renderAll()),c((function(t){return Object(o.a)(Object(o.a)({},t),{},{canvas:n,fontSize:e.target.value})}))},handleUploadImage:function(e){var n=t.canvas;if(n&&e.target.files){var a=URL.createObjectURL(e.target.files[0]);d.fabric.Image.fromURL(a,(function(e){n.add(e),n.renderAll()}),{scaleX:.15,scaleY:.15})}c((function(e){return Object(o.a)(Object(o.a)({},e),{},{canvas:n})}))},handleOnChangeBackgroundColor:function(e){var n=t.canvas;l(),n&&(n.backgroundColor=e.hex,n.renderAll()),c((function(t){return Object(o.a)(Object(o.a)({},t),{},{canvas:n,backgroundColor:e.hex})}))},handleUploadImageWithLink:function(){var e=t.canvas,n=t.linkImage;e&&n&&(d.fabric.Image.fromURL(n,(function(n){var t;(null===(t=n.getElement())||void 0===t?void 0:t.src)?(e.add(n),e.renderAll()):alert("\u043d\u0435\u0432\u0435\u0440\u043d\u0430\u044f \u0441\u0441\u044b\u043b\u043a\u0430")}),{scaleX:.15,scaleY:.15}),c((function(n){return Object(o.a)(Object(o.a)({},n),{},{canvas:e,linkImage:""})})))},handleOnChangeLink:function(e){c((function(n){return Object(o.a)(Object(o.a)({},n),{},{linkImage:e.target.value})}))}}},j=t(3),h=function(){var e=u(),n=e.state,t=e.container,a=e.handleAddText,c=e.handleDownload,i=e.handleAddBackground,r=e.handleRemoveBackground,o=e.handleChangeColor,s=e.handleChangeStyleText,d=e.handleChangeFontSize,h=e.handleUploadImage,b=e.handleOnChangeBackgroundColor,g=e.handleUploadImageWithLink,v=e.handleOnChangeLink;return Object(j.jsx)(j.Fragment,{children:Object(j.jsxs)("div",{children:[Object(j.jsxs)("div",{className:"settingns-wrapper",children:[Object(j.jsx)("div",{className:"setting-item",children:Object(j.jsx)("button",{onClick:function(){return a()},children:"\u0414\u043e\u0431\u0430\u0432\u0438\u0442\u044c \u0442\u0435\u043a\u0441\u0442"})}),Object(j.jsx)("div",{className:"setting-item",children:Object(j.jsxs)("label",{children:[Object(j.jsx)("input",{type:"color",value:n.color,onChange:o}),"\u0446\u0432\u0435\u0442 \u0442\u0435\u043a\u0441\u0442\u0430"]})}),Object(j.jsx)("div",{className:"setting-item",children:Object(j.jsxs)("label",{children:[Object(j.jsx)("input",{type:"checkbox",name:"fonttype",onChange:function(e){s(e,"fontWeight")}}),"Bold"]})}),Object(j.jsx)("div",{className:"setting-item",children:Object(j.jsxs)("label",{children:[Object(j.jsx)("input",{type:"checkbox",name:"fonttype",onChange:function(e){s(e,"fontStyle")}}),"\u041a\u0443\u0440\u0441\u0438\u0432"]})}),Object(j.jsx)("div",{className:"setting-item",children:Object(j.jsxs)("label",{children:[Object(j.jsx)("input",{type:"checkbox",name:"fonttype",onChange:function(e){s(e,"underline")}}),"\u041f\u043e\u0434\u0447\u0435\u0440\u043a\u043d\u0443\u0442\u044b\u0439"]})}),Object(j.jsx)("div",{className:"setting-item",children:Object(j.jsxs)("label",{children:[Object(j.jsx)("input",{type:"range",min:"1",max:"120",step:"1",value:n.fontSize,onChange:d}),"\u0420\u0430\u0437\u043c\u0435\u0440 \u0448\u0440\u0438\u0444\u0442\u0430"]})})]}),Object(j.jsxs)("div",{className:"settingns-wrapper",children:[Object(j.jsx)("div",{className:"setting-item",children:Object(j.jsx)("button",{onClick:function(){return i("https://cdn.pixabay.com/photo/2015/04/23/22/00/tree-736885__480.jpg")},children:"\u0414\u043e\u0431\u0430\u0432\u0438\u0442\u044c \u0424\u043e\u043d"})}),Object(j.jsx)("div",{className:"setting-item",children:Object(j.jsx)("button",{onClick:r,children:"\u0423\u0434\u0430\u043b\u0438\u0442\u044c \u0424\u043e\u043d"})}),Object(j.jsx)("div",{className:"setting-item",children:Object(j.jsxs)("label",{htmlFor:"img",children:["Upload image",Object(j.jsx)("input",{type:"file",id:"img",name:"img",accept:"image/*",onChange:h})]})}),Object(j.jsxs)("div",{className:"setting-item",children:[Object(j.jsx)("input",{value:n.linkImage,type:"text",onChange:v}),Object(j.jsx)("button",{onClick:g,children:"\u0437\u0430\u0433\u0440\u0443\u0437\u0438\u0442\u044c \u043f\u043e \u0441\u0441\u044b\u043b\u043a\u0435"})]})]}),Object(j.jsx)("a",{className:"download",download:"image.png",href:n.href,onClick:c,children:"\u0421\u043a\u0430\u0447\u0430\u0442\u044c \u043a\u0430\u0440\u0442\u0438\u043d\u043a\u0443"}),Object(j.jsx)(l.a,{color:n.backgroundColor,onChange:b}),Object(j.jsx)("canvas",{id:"canvas",style:{width:"100%",height:"100%",border:"2px solid black",margin:"auto"},ref:t})]})})};var b=function(){return Object(j.jsx)("div",{className:"App",children:Object(j.jsx)("header",{className:"App-header",children:Object(j.jsx)(h,{})})})},g=function(e){e&&e instanceof Function&&t.e(3).then(t.bind(null,203)).then((function(n){var t=n.getCLS,a=n.getFID,c=n.getFCP,i=n.getLCP,r=n.getTTFB;t(e),a(e),c(e),i(e),r(e)}))};r.a.render(Object(j.jsx)(c.a.StrictMode,{children:Object(j.jsx)(b,{})}),document.getElementById("root")),g()},83:function(e,n,t){},84:function(e,n,t){}},[[201,1,2]]]);
//# sourceMappingURL=main.7f2171c2.chunk.js.map